# OBS Studioで配信ができる環境を作る

まずはOBS Studioを[公式](https://obsproject.com/ja)からインストール

## プロファイルの用意

プロファイル → 新規から新しいプロファイルを作成する。名前は何でも良い。作成してそのプロファイルに切り替えたら設定を開く

### 一般

基本的にデフォルトのままで良い

### 配信

TwitchやYouTubeのアカウントと連携しておく。1つのプロファイルにつき1つのアカウントしか連携できないため、例えばTwitchとYouTubeを使い分けたい場合はTwitch用とYouTube用それぞれでプロファイルを用意する必要がある。

### 出力

出力モードを「詳細」に変更。

#### 配信タブ

- 映像エンコーダ：NVIDIA NVENC H.264推奨
- 出力をリスケールする：必須ではないが、使用しているディスプレイがフルHD以上の場合は1920x1080に収まるよう変更した方が良い。
- レート制御：CBR
- ビットレート：3000~6000Kbpsあたりが目安。高いほど配信の品質がよくなる
- 他：好み

#### 録画タブ

- 録画フォーマット：Matroska Video (.mkv)推奨
- 映像エンコーダ：NVIDIA NVENC H.264推奨
- 出力をリスケールする：必須ではないが、使用しているディスプレイがフルHD以上の場合は1920x1080に収まるよう変更した方が良い。
- レート制御：CBR
- ビットレート：こちらは配信より高くてもOK、配信と同じにしてみて画質が気になるなら高めに設定すると良い。
- 他：好み

#### 音声タブ

基本デフォルト

#### リプレイバッファ

GeForce Experienceでいうインスタントリプレイ(巻き戻し録画)のこと。最大リプレイ時間に設定した秒数分巻き戻し録画ができるが、長く設定すればするほどメモリを食うので自身のPCスペックと相談。

### 音声

- デスクトップ音声：無効
- マイク音声：適切に設定されているかを確認。NVIDIA Broadcastなどノイキャンアプリを選択することもできる

### 映像

- 基本(キャンパス)解像度：自身が使用しているディスプレイサイズ
- 出力(スケーリング)解像度：フルHD(1920x1080)推奨

### ホットキー・アクセシビリティ・詳細設定

好み

## シーン・ソースの設定

基本的に録画したいゲームごとにシーン＆ソースを設定する。ここではマイクラを例に紹介

### シーンの追加

シーンの「+」からシーンを追加。名前は何でも良いが「Minecraft」と設定。

### ソースの追加

Minecraftシーンにソースの「+」から必要なウィンドウや音声を追加していく

- マイクラ画面の追加

    「+」→ ウィンドウキャプチャ(orゲームキャプチャ) → 新規作成(名前は何でも良いがシーンで使用されてる名前は使えない、ここでは先頭を小文字にしてminecraftと設定) → ウィンドウでマイクラを選択。

    ゲームによってはウィンドウキャプチャで映らないor画面が動かない場合があるため、その場合はゲームキャプチャを使用する

- 音声の追加

    「+」→ アプリーケーション音声出力キャプチャ → 新規作成(名前は何でも良いがこちらも既にシーンやソースで使用されてる名前は使えない。ここではminecraft_audioと設定)

    モード：特定の実行フィルから音声セッションをキャプチャする

    現在アクティブなセッションから追加にて、セッションからマイクラを選択し「実行可能なファイルを追加」をクリック

## 音声ミキサーの設定

ここまで設定でMinecraftシーンを選択すると、ソースの横の音声ミキサー欄にマイクとminecraft_audioが存在するはず。各音声ごとに「︙」を押して「フィルタ」を設定していく。

### ゲーム音声(minecraft_audio)のフィルタ設定

「+」からゲインとコンプレッサーを追加。順番も上からゲイン→コンプレッサーとなるようにする。

- ゲイン：実際に自分の配信を見てみて、ゲーム音が小さければ大きな値に、うるさければ小さめの値に調整
- コンプレッサー：デフォルトのままでOK

### マイクのフィルタ設定

上から順に、ノイズ抑制 → ゲイン → ノイズゲート → コンプレッサー → アップワードコンプレッサーとなるよう追加

- ノイズ抑制：好みだが、特に問題なければRNNoise
- ゲイン：実際に自分の配信を見てみて、自分の声が小さければ大きな値に、うるさければ小さめの値に調整
- ノイズゲート：基本はデフォルトのままでOK
- コンプレッサー：比率は32.00:1推奨、他は好み
- アップワードコンプレッサー：基本はデフォルトのままでOK
